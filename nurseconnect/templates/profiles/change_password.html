{% load i18n %}

{% block content %}
    <div class="profiles">
        <form method="POST" action="{% url "view_my_profile" %}" class="profiles__profile_password_change_form">
            <input type="hidden" name="action" value="edit_profile_password">
            {% csrf_token %}
            <fieldset class="Form-fieldGroup">
                <legend class="Form-groupHeading">Password</legend>

                {% if profile_password_change_form.errors or profile_password_change_form.non_field_errors %}
                    {% if profile_password_change_form.non_field_errors %}
                        {% for error in profile_password_change_form.non_field_errors %}
                            <span class="error">{{ error }}</span>
                        {% endfor %}
                    {% endif %}
                {% endif %}

                {% if messages %}
                    <ul class="error-list">
                        {% for message in messages %}
                            <li class="error-list__item error">{{ message }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}

                <div class="Form-field">
                    {{ profile_password_change_form.old_password.label_tag }}
                    {{ profile_password_change_form.old_password }}
                    {{ profile_password_change_form.old_password.errors }}
                </div>

                <div class="Form-field">
                    {{ profile_password_change_form.new_password.label_tag }}
                    {{ profile_password_change_form.new_password }}
                    {{ profile_password_change_form.new_password.errors }}
                </div>

                <div class="Form-field">
                    {{ profile_password_change_form.confirm_password.label_tag }}
                    {{ profile_password_change_form.confirm_password }}
                    {{ profile_password_change_form.confirm_password.errors }}
                </div>
            </fieldset>
            <input class="Button" type="submit" value="{% trans "Save" %}">
        <br>
        </form>
    </div>
{% endblock %}
